#------------ tautau ----------------------------------------------

v=246.22
Vud=0.97401
Vus=0.22650
Vub=3.61*10^(-3)
Vcd=-0.22636
Vcs=0.97320
Vcb=4053*10^(-3)
Vtd=8.54*10^(-3)
Vts=-39.78*10^(-3)
Vtb=0.999172
yd=2.6823*10^(-5)
ys=5.34164*10^(-4)
yb=0.02401
yu=1.24064*10^(-5)
yc=7.2945*10^(-3)
yt=0.99228




function params_tautau_SM_lep()
    return [19691.93, 11351.06,
    6878.49, 4382.67, 2869.07, 1971.25, 1375.57, 995.67, 723.26, 560.60, 395.85, 549.89, 619.69,
    212.18, 85.58, 41.15, 41.41]
end

SM_params_tautau_lep=[19691.93, 11351.06,
    6878.49, 4382.67, 2869.07, 1971.25, 1375.57, 995.67, 723.26, 560.60, 395.85, 549.89, 619.69,
    212.18, 85.58, 41.15, 41.41]

function params_clq_d_3311_tautau()
    return [[686.185, 216.169], [626.28, 283.791], [511.916, 266.054], [452.011, 258.294], [339.462, 300.42],
    [283.188, 324.808], [248.697, 286.008], [210.575, 267.163], [186.976, 295.985], [165.193, 281.574],
    [139.779, 291.551], [259.589, 543.194], [446.565, 1275.95], [252.327, 1052.02], [150.67, 910.128],
    [101.657, 757.146], [179.715, 2821.28]]
end

function params_clq_d_3322_tautau()
    return [[140.679, 39.5651], [98.5957, 39.779], [93.4856, 39.8859], [66.1313, 39.672], [53.5062, 37.6403],
    [39.3782, 37.9611], [40.5806, 34.8601], [30.9615, 33.8977], [30.9615, 36.1433], [17.7352, 32.7214],
    [19.2382, 29.1926], [32.4645, 53.2525], [36.3722, 109.927], [24.0477, 84.4768], [16.5328, 64.3735],
    [7.81552, 51.8624], [12.9257, 145.001]]
end

function params_clq_d_3333_tautau()
    return [[38.3155, 10.5663], [31.2728, 12.6208], [23.3079, 10.7717], [20.4573, 11.4468],
    [13.4985, 10.8011], [13.8338, 10.2434], [12.3247, 9.4216], [10.7317, 10.3902], [7.96493, 8.95199],
    [6.79115, 7.5725], [5.03048, 8.33562], [9.39023, 14.9102], [14.3369, 31.6988], [6.53962, 21.5141],
    [3.77286, 16.5538], [2.26372, 12.2393], [3.35365, 32.4913]]
end

function params_clq_d_3312_tautau()
    return [[0.0, 197.526], [0.0, 253.463], [0.0, 235.982], [0.0, 231.612], [0.0, 240.352], [0.0, 225.494],
    [0.0, 246.47], [0.0, 259.581], [0.0, 234.234], [0.0, 237.73], [0.0, 225.494], [0.0, 385.438],
    [0.0, 967.528], [0.0, 831.182], [0.0, 652.885], [0.0, 546.255], [0.0, 1810.95]]
end

function params_clq_d_3313_tautau()
    return [[0.0, 110.889], [0.0, 118.636], [0.0, 133.163], [0.0, 134.132], [0.0, 120.573], [0.0, 136.069],
    [0.0, 129.774], [0.0, 133.163], [0.0, 133.647], [0.0, 126.868], [0.0, 124.931], [0.0, 233.883],
    [0.0, 523.452], [0.0, 445.007], [0.0, 332.182], [0.0, 267.295], [0.0, 884.688]]
end

function params_clq_d_3323_tautau()
    return [[0.0, 40.269], [0.0, 39.6837], [0.0, 41.2055], [0.0, 47.761], [0.0, 35.8207], [0.0, 42.9614],
    [0.0, 35.3525], [0.0, 34.0648], [0.0, 30.67], [0.0, 34.416], [0.0, 31.6065], [0.0, 56.4235],
    [0.0, 114.837], [0.0, 84.6352], [0.0, 65.9054], [0.0, 50.8045], [0.0, 136.727]]
end

function params_cqe_d_1133_tautau()
    return [[211.855, 228.74], [158.441, 242.9], [127.233, 255.971], [102.627, 237.454], [80.4209, 291.916],
    [84.6219, 267.953], [48.0125, 289.738], [52.2135, 298.451], [36.0093, 301.719], [43.2112, 277.756],
    [51.6134, 285.381], [58.2151, 543.53], [96.0249, 1277.68], [67.8176, 1091.42], [41.4107, 869.213],
    [21.6056, 774.449], [50.4131, 2720.92]]
end

function params_cqe_d_2233_tautau()
    return [[42.8318, 46.2867], [30.3307, 39.2183], [21.1085, 40.7004], [16.8048, 42.8665],
    [13.7308, 37.9642], [7.89007, 39.3323], [7.17279, 38.7623], [9.22216, 33.0619], [5.94317, 32.6059],
    [4.20121, 32.1499], [3.48393, 31.6938], [6.35305, 52.101], [9.93944, 116.515], [5.5333, 97.3617],
    [2.45924, 66.4659], [2.15184, 52.4431], [2.86912, 153.225]]
end

function params_cqe_d_3333_tautau()
    return [[12.9815, 11.9779], [8.75027, 12.8468], [7.25351, 12.9709], [4.92203, 11.2642],
    [4.4327, 12.2572], [2.73446, 12.2262], [2.59054, 10.3643], [1.92851, 10.985], [1.69824, 9.65062],
    [1.81338, 9.1231], [0.978648, 8.6266], [1.66946, 15.4534], [2.4754, 32.055], [1.26649, 23.8628],
    [0.805946, 16.4154], [0.489324, 12.8468], [0.690811, 35.9959]]
end

function params_cqe_d_1233_tautau()
    return [[0.0, 233.067], [0.0, 251.537], [0.0, 250.657], [0.0, 212.839], [0.0, 220.754], [0.0, 276.163],
    [0.0, 255.934], [0.0, 238.344], [0.0, 240.983], [0.0, 218.995], [0.0, 210.2], [0.0, 424.798],
    [0.0, 946.341], [0.0, 798.585], [0.0, 629.721], [0.0, 554.085], [0.0, 1811.77]]
end

function params_cqe_d_1333_tautau()
    return [[0.0, 112.939], [0.0, 117.685], [0.0, 134.293], [0.0, 142.835], [0.0, 121.481], [0.0, 132.87],
    [0.0, 134.293], [0.0, 136.191], [0.0, 125.752], [0.0, 136.666], [0.0, 112.939], [0.0, 227.302],
    [0.0, 535.275], [0.0, 400.982], [0.0, 343.563], [0.0, 270.01], [0.0, 931.986]]
end

function params_cqe_d_2333_tautau()
    return [[0.0, 44.4867], [0.0, 49.5316], [0.0, 44.4867], [0.0, 43.7988], [0.0, 41.8496], [0.0, 41.047],
    [0.0, 39.3272], [0.0, 38.0659], [0.0, 35.0849], [0.0, 33.365], [0.0, 33.365], [0.0, 57.2136],
    [0.0, 122.338], [0.0, 84.1578], [0.0, 58.7041], [0.0, 47.3531], [0.0, 142.403]]
end

function events_tautau(params, i)
    #TODO: clq_33 = params.Clq[1]
    #TODO: cqe_33 = params.Cqe[1]
    
    clq_33 = params.Clq1
    cqe_33 = params.Cqe

    SM_tau = params_tautau_SM_lep()
    plq_3311 = params_clq_d_3311_tautau()
    clq_3311=plq_3311[i]
    plq_3312 = params_clq_d_3312_tautau()
    clq_3312=plq_3312[i]
    plq_3322 = params_clq_d_3322_tautau()
    clq_3322=plq_3322[i]
    plq_3323 = params_clq_d_3323_tautau()
    clq_3323=plq_3323[i]
    plq_3313 = params_clq_d_3313_tautau()
    clq_3313=plq_3313[i]
    plq_3333 = params_clq_d_3333_tautau()
    clq_3333=plq_3333[i]
    pqe_3311 = params_cqe_d_1133_tautau()
    cqe_3311=pqe_3311[i]
    pqe_3312 = params_cqe_d_1233_tautau()
    cqe_3312=pqe_3312[i]
    pqe_3322 = params_cqe_d_2233_tautau()
    cqe_3322=pqe_3322[i]
    pqe_3323 = params_cqe_d_2333_tautau()
    cqe_3323=pqe_3323[i]
    pqe_3313 = params_cqe_d_1333_tautau()
    cqe_3313=pqe_3313[i]
    pqe_3333 = params_cqe_d_3333_tautau()
    cqe_3333=pqe_3333[i]

    events = (SM_tau[i] +
    clq_33*(clq_3311[1]*Vtd*Vtd+clq_3322[1]*Vts*Vts+clq_3333[1]*Vtb*Vtb) +
    clq_33*clq_33*(clq_3311[2]*Vtd*Vtd*Vtd*Vtd+clq_3312[2]*Vtd*Vts*Vtd*Vts+ clq_3313[2]*Vtd*Vtb*Vtd*Vtb+ clq_3322[2]*Vts*Vts*Vts*Vts+ clq_3323[2]*Vts*Vtb*Vts*Vtb+ clq_3333[2]*Vtb*Vtb*Vtb*Vtb) +
    cqe_33*(cqe_3311[1]*Vtd*Vtd+cqe_3322[1]*Vts*Vts+cqe_3333[1]*Vtb*Vtb) +
    cqe_33*cqe_33*(cqe_3311[2]*Vtd*Vtd*Vtd*Vtd+cqe_3312[2]*Vtd*Vts*Vtd*Vts+ cqe_3313[2]*Vtd*Vtb*Vtd*Vtb+ cqe_3322[2]*Vts*Vts*Vts*Vts+ cqe_3323[2]*Vts*Vtb*Vts*Vtb+ cqe_3333[2]*Vtb*Vtb*Vtb*Vtb))
    return events
end

num_tau=size(SM_params_tautau_lep);

tautau_dist=Function[]
for i in 1:num_tau[1]
    @eval begin
        function $(Symbol("events_tautau_bin$i"))(params)
            return events_tautau(params, $i)
        end
        push!(tautau_dist, $(Symbol("events_tautau_bin$i")))
    end
end

#events_mumu(C,i)=events_mumu_param(C, i, coeffs);
